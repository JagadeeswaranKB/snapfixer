name: snapfixer
services:
  - name: web
    type: docker
    imageUri: .
    ports:
      - port: 8000
        protocol: http
    env:
      - key: DEBUG
        value: "0"
      - key: ALLOWED_HOSTS
        value: "*" # Update with your domain later
      - key: PORT
        value: "8000"
    instance_type: nano
    health_checks:
      - http:
          path: /
          port: 8000
    regions:
      - sin # Singapore (Asia)
  - name: worker
    type: docker
    imageUri: .
    command: celery -A validphoto worker -l info --pool=solo
    instance_type: nano
    regions:
      - sin
